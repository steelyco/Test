# План: доступ к сайту тестов с любого устройства через домашний роутер

1) Определите способ публикации
- Вариант A (проще): туннель без проброса портов — Cloudflare Tunnel / Tailscale Funnel / ngrok (авто‑TLS, не нужен белый IP).
- Вариант B: классический порт‑форвардинг на роутере + домен + TLS.

2) Подготовьте хост
- Директория проекта содержит `index.html`, `styles.css`, `app.js`.
- Создайте отдельного пользователя для сервера, настройте автозапуск.

3) Поднимите статический веб‑сервер
- Nginx или Caddy (рекомендуется для постоянной работы).
- Альтернатива: Docker (nginx:alpine/caddy) — смонтировать папку и опубликовать порт.
- Для локальной проверки: `python3 -m http.server 8080` (временно).

4) Сделайте сайт доступным из интернета
- Туннель:
  - Cloudflare Tunnel: подключить хост к аккаунту, привязать сабдомен → локальный порт; TLS автоматически.
  - Tailscale + Funnel: создать tailnet, включить Funnel для сервиса.
  - ngrok: запустить туннель до локального порта, получить публичный URL.
- Порт‑форвардинг:
  - Настроить DDNS (no‑ip/DuckDNS/Cloudflare DDNS) или собственный домен.
  - Пробросить 80/443 на внутренний IP сервера.
  - Включить hairpin NAT/loopback, чтобы домен открывался из LAN.

5) DNS и домен
- Для домена: A/AAAA на публичный IP (или DDNS‑клиент на сервере).
- Для Cloudflare Tunnel: укажете сабдомен на туннель в панели Cloudflare.

6) TLS (HTTPS)
- Туннели дают TLS автоматически.
- При порт‑форвардинге: certbot (Let’s Encrypt), автообновление сертификатов.

7) Конфигурация сервера (кратко)
- Nginx: root — директория проекта, index — `index.html`, статика с кэшем; HTTPS серверный блок.
- Caddy: домен { root <путь>, file_server }, TLS выдаётся автоматически.

8) Безопасность
- Оставьте в каталоге только нужные файлы сайта; ограничьте доступ к служебным `.md` и скриптам.
- Включите брандмауэр (разрешить 80/443), обновляйте ОС и пакеты.
- Минимизируйте открытые порты на роутере.

9) Проверка
- LAN: `http://<ip_сервера>:<порт>`.
- Интернет: домен/URL туннеля с мобильной сети; проверить HTTPS и работу загрузки тестов (JSON/CSV/MD).

10) Резервирование и логи
- Логи доступа/ошибок и их ротация (Nginx/Caddy).
- Бэкап директории сайта (Git/архив по расписанию).

11) Загрузка пользовательских тестов
- Обработка идёт в браузере, сервер не хранит файлы.
- Проверьте корректные MIME‑типы для `.json`, `.csv`, `.md` на сервере.

12) Рекомендации
- Самый простой стабильный вариант: Caddy + Cloudflare Tunnel.
- Быстрый старт без домена: ngrok (учтите ограничение бесплатного плана).

13) Чек‑лист готовности
- Сайт открывается локально и снаружи.
- HTTPS работает.
- Загрузка файлов тестов работает.
- Нет доступа к лишним файлам.
